# **Dreamland Engine - Nháº­t KÃ½ PhÃ¡t Triá»ƒn (Update Log)**

ChÃ o má»«ng cÃ¡c Äá»™i trÆ°á»Ÿng vÃ  nhá»¯ng ngÆ°á»i Ä‘á»“ng hÃ nh Ä‘áº¿n vá»›i nháº­t kÃ½ phÃ¡t triá»ƒn chÃ­nh thá»©c cá»§a Dreamland Engine! Táº¡i Ä‘Ã¢y, chÃºng tÃ´i sáº½ ghi láº¡i nhá»¯ng thay Ä‘á»•i, nÃ¢ng cáº¥p vÃ  cáº£ nhá»¯ng quyáº¿t Ä‘á»‹nh thiáº¿t káº¿ quan trá»ng Ä‘Ã£ Ä‘á»‹nh hÃ¬nh nÃªn tháº¿ giá»›i nÃ y.

---

## **Báº£n cáº­p nháº­t v0.3.1 - "Giao diá»‡n Cháº¿ táº¡o ThÃ´ng minh" (18/07/2025)**

*TÃªn mÃ£: The Artisan's Workbench*

### ğŸŒŸ **Giá»›i thiá»‡u chung**

Báº£n cáº­p nháº­t nÃ y táº­p trung hoÃ n toÃ n vÃ o viá»‡c cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng (UX) cho má»™t trong nhá»¯ng tÃ­nh nÄƒng cá»‘t lÃµi nháº¥t: Cháº¿ táº¡o. Dá»±a trÃªn báº£n káº¿ hoáº¡ch chi tiáº¿t, chÃºng ta Ä‘Ã£ biáº¿n má»™t danh sÃ¡ch cÃ´ng thá»©c Ä‘Æ¡n giáº£n thÃ nh má»™t giao diá»‡n thÃ´ng minh, cÃ³ kháº£ nÄƒng sáº¯p xáº¿p vÃ  lá»c, giÃºp ngÆ°á»i chÆ¡i dá»… dÃ ng tÃ¬m tháº¥y thá»© há» cáº§n vÃ  Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh nhanh hÆ¡n.

### âœ¨ **Thay Ä‘á»•i chÃ­nh & PhÃ¢n tÃ­ch**

1.  **TÃ­nh nÄƒng Sáº¯p xáº¿p theo Kháº£ nÄƒng Cháº¿ táº¡o (`Sort by Craftability`):**
    *   **Váº¥n Ä‘á»:** CÃ¡c cÃ´ng thá»©c Ä‘Æ°á»£c liá»‡t kÃª má»™t cÃ¡ch lá»™n xá»™n, khiáº¿n ngÆ°á»i chÆ¡i pháº£i cuá»™n vÃ  kiá»ƒm tra tá»«ng cÃ´ng thá»©c Ä‘á»ƒ xem há» cÃ³ thá»ƒ cháº¿ táº¡o nhá»¯ng gÃ¬.
    *   **Giáº£i phÃ¡p:**
        *   Má»™t thuáº­t toÃ¡n má»›i Ä‘Ã£ Ä‘Æ°á»£c triá»ƒn khai Ä‘á»ƒ tÃ­nh toÃ¡n `craftabilityScore` (Ä‘iá»ƒm kháº£ nÄƒng cháº¿ táº¡o) cho má»—i cÃ´ng thá»©c. Äiá»ƒm nÃ y Ä‘Æ°á»£c tÃ­nh báº±ng tá»· lá»‡ `(sá»‘ nguyÃªn liá»‡u sá»Ÿ há»¯u / tá»•ng sá»‘ nguyÃªn liá»‡u yÃªu cáº§u)`.
        *   ThÃªm má»™t nÃºt "Sáº¯p xáº¿p" vÃ o giao diá»‡n, cho phÃ©p ngÆ°á»i chÆ¡i chuyá»ƒn Ä‘á»•i giá»¯a hai cháº¿ Ä‘á»™:
            *   **Máº·c Ä‘á»‹nh (`Craftability`):** Sáº¯p xáº¿p cÃ´ng thá»©c theo `craftabilityScore` giáº£m dáº§n. CÃ¡c cÃ´ng thá»©c cÃ³ thá»ƒ cháº¿ táº¡o ngay (100%) sáº½ luÃ´n Ä‘Æ°á»£c Ä‘áº©y lÃªn Ä‘áº§u.
            *   **Theo váº§n (`A-Z`):** Sáº¯p xáº¿p theo tÃªn váº­t pháº©m káº¿t quáº£.
    *   **Káº¿t quáº£:** NgÆ°á»i chÆ¡i giá» Ä‘Ã¢y cÃ³ thá»ƒ tháº¥y ngay láº­p tá»©c nhá»¯ng gÃ¬ há» cÃ³ thá»ƒ cháº¿ táº¡o vÃ  nhá»¯ng gÃ¬ há» sáº¯p cÃ³ thá»ƒ cháº¿ táº¡o, giÃºp viá»‡c láº­p káº¿ hoáº¡ch thu tháº­p tÃ i nguyÃªn trá»Ÿ nÃªn dá»… dÃ ng hÆ¡n ráº¥t nhiá»u.

2.  **Bá»™ lá»c "Chá»‰ Hiá»ƒn thá»‹ cÃ³ thá»ƒ Cháº¿ táº¡o" (`Show only craftable`):**
    *   **Váº¥n Ä‘á»:** Khi cÃ³ hÃ ng trÄƒm cÃ´ng thá»©c, viá»‡c tÃ¬m kiáº¿m nhá»¯ng cÃ´ng thá»©c Ä‘Ã£ Ä‘á»§ nguyÃªn liá»‡u váº«n cÃ²n khÃ³ khÄƒn.
    *   **Giáº£i phÃ¡p:** ThÃªm má»™t cÃ´ng táº¯c (`Switch`) vÃ o giao diá»‡n. Khi Ä‘Æ°á»£c báº­t, nÃ³ sáº½ lá»c danh sÃ¡ch vÃ  chá»‰ hiá»ƒn thá»‹ nhá»¯ng cÃ´ng thá»©c cÃ³ `craftabilityScore` lÃ  100%.
    *   **Káº¿t quáº£:** Cung cáº¥p má»™t cháº¿ Ä‘á»™ xem "táº­p trung", loáº¡i bá» má»i sá»± phÃ¢n tÃ¢m vÃ  giÃºp ngÆ°á»i chÆ¡i thá»±c hiá»‡n hÃ nh Ä‘á»™ng cháº¿ táº¡o má»™t cÃ¡ch nhanh chÃ³ng.

3.  **Cáº£i thiá»‡n Pháº£n há»“i Trá»±c quan (Visual Feedback):**
    *   **Váº¥n Ä‘á»:** Giao diá»‡n cÅ© khÃ´ng cho ngÆ°á»i chÆ¡i biáº¿t rÃµ há» thiáº¿u gÃ¬.
    *   **Giáº£i phÃ¡p:**
        *   **MÃ u sáº¯c NguyÃªn liá»‡u:** Trong danh sÃ¡ch nguyÃªn liá»‡u, cÃ¡c váº­t pháº©m Ä‘Ã£ Ä‘á»§ sá»‘ lÆ°á»£ng sáº½ cÃ³ mÃ u xanh lÃ¡ cÃ¢y, trong khi nhá»¯ng váº­t pháº©m cÃ²n thiáº¿u sáº½ cÃ³ mÃ u Ä‘á».
        *   **Tooltip chi tiáº¿t:** Di chuá»™t qua má»™t cÃ´ng thá»©c sáº½ hiá»ƒn thá»‹ má»™t `Tooltip` thÃ´ng bÃ¡o chÃ­nh xÃ¡c cÃ¡c nguyÃªn liá»‡u cÃ²n thiáº¿u (vÃ­ dá»¥: "Báº¡n cÃ²n thiáº¿u: 2x Sáº¯t, 1x Than cá»§i").
        *   **Tooltip cho nÃºt Crafting chÃ­nh:** Tooltip cá»§a nÃºt BÃºa trÃªn giao diá»‡n chÃ­nh giá» sáº½ hiá»ƒn thá»‹ sá»‘ lÆ°á»£ng cÃ´ng thá»©c cÃ³ thá»ƒ cháº¿ táº¡o ngay (`"Má»Ÿ cá»­a sá»• cháº¿ táº¡o. (3 cÃ³ thá»ƒ cháº¿ táº¡o ngay)"`), cung cáº¥p thÃ´ng tin há»¯u Ã­ch mÃ  khÃ´ng cáº§n má»Ÿ popup.

### ğŸ® **áº¢nh hÆ°á»Ÿng Ä‘áº¿n Tráº£i nghiá»‡m & TÆ°Æ¡ng lai**

*   **Tráº£i nghiá»‡m ngÆ°á»i chÆ¡i:** Giao diá»‡n cháº¿ táº¡o giá» Ä‘Ã¢y trá»±c quan, thÃ´ng minh vÃ  Ã­t gÃ¢y khÃ³ chá»‹u hÆ¡n Ä‘Ã¡ng ká»ƒ. NgÆ°á»i chÆ¡i cÃ³ thá»ƒ nhanh chÃ³ng Ä‘Ã¡nh giÃ¡ tÃ¬nh hÃ¬nh tÃ i nguyÃªn vÃ  Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh cháº¿ táº¡o má»™t cÃ¡ch hiá»‡u quáº£.
*   **Kháº£ nÄƒng má»Ÿ rá»™ng:** Ná»n táº£ng logic `craftabilityScore` nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¡i sá»­ dá»¥ng trong tÆ°Æ¡ng lai cho cÃ¡c tÃ­nh nÄƒng khÃ¡c, vÃ­ dá»¥ nhÆ° gá»£i Ã½ cho ngÆ°á»i chÆ¡i nÃªn Ä‘i thu tháº­p tÃ i nguyÃªn gÃ¬ tiáº¿p theo.

---

## **Báº£n cáº­p nháº­t v0.2.62 - "Kiáº¿n trÃºc Báº¥t hoáº¡i" (17/07/2025)**

*TÃªn mÃ£: Indestructible Architecture*

### ğŸŒŸ **Giá»›i thiá»‡u chung**

ÄÃ¢y lÃ  má»™t báº£n cáº­p nháº­t quan trá»ng, giáº£i quyáº¿t triá»‡t Ä‘á»ƒ lá»—i cáº¥u trÃºc dá»¯ liá»‡u Ä‘Ã£ gÃ¢y ra cÃ¡c lá»—i `TypeError` trong engine sinh tháº¿ giá»›i. Báº±ng cÃ¡ch tÃ¡i cáº¥u trÃºc láº¡i cÃ¡ch cÃ¡c `structure` (cÃ´ng trÃ¬nh) Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a vÃ  tham chiáº¿u, chÃºng ta Ä‘Ã£ táº¡o ra má»™t há»‡ thá»‘ng dá»¯ liá»‡u nháº¥t quÃ¡n, máº¡nh máº½ vÃ  loáº¡i bá» hoÃ n toÃ n cÃ¡c lá»—i liÃªn quan Ä‘áº¿n "entity khÃ´ng há»£p lá»‡".

### âœ¨ **Thay Ä‘á»•i chÃ­nh & PhÃ¢n tÃ­ch**

1.  **TÃ¡i cáº¥u trÃºc `StructureDefinitionSchema`:**
    *   **Váº¥n Ä‘á»:** CÃ¡c thuá»™c tÃ­nh `loot` vÃ  `conditions` cho cÃ¡c cÃ´ng trÃ¬nh Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a má»™t cÃ¡ch khÃ´ng nháº¥t quÃ¡n, Ä‘Ã´i khi náº±m trong file template, Ä‘Ã´i khi láº¡i thiáº¿u, gÃ¢y ra lá»—i khi engine cá»‘ gáº¯ng xá»­ lÃ½ chÃºng nhÆ° má»™t thá»±c thá»ƒ Ä‘á»™c láº­p.
    *   **Giáº£i phÃ¡p:** ÄÃ£ thá»±c hiá»‡n má»™t cuá»™c "Ä‘áº¡i tu" nhá» nhÆ°ng quan trá»ng cho `StructureDefinitionSchema` (trong `src/lib/game/definitions/structure.ts`). Thuá»™c tÃ­nh `loot` vÃ  `conditions` giá» Ä‘Ã¢y Ä‘Ã£ chÃ­nh thá»©c trá»Ÿ thÃ nh má»™t pháº§n cá»§a Ä‘á»‹nh nghÄ©a gá»‘c cá»§a má»™t cÃ´ng trÃ¬nh. Äiá»u nÃ y Ä‘áº£m báº£o ráº±ng báº¥t ká»³ cÃ´ng trÃ¬nh nÃ o cÅ©ng cÃ³ má»™t cáº¥u trÃºc dá»¯ liá»‡u chuáº©n, dá»… dá»± Ä‘oÃ¡n.

2.  **Chuáº©n hÃ³a Dá»¯ liá»‡u trong `structures.ts`:**
    *   **Váº¥n Ä‘á»:** Dá»¯ liá»‡u vá» `loot` vÃ  `conditions` cá»§a "Cá»­a háº§m má» bá» hoang" bá»‹ Ä‘áº·t sai chá»— trong cÃ¡c file template (`mountain.ts`, `cave.ts`).
    *   **Giáº£i phÃ¡p:** ToÃ n bá»™ thÃ´ng tin `loot` vÃ  `conditions` Ä‘Ã£ Ä‘Æ°á»£c di chuyá»ƒn vá» Ä‘Ãºng "nhÃ " cá»§a nÃ³: file Ä‘á»‹nh nghÄ©a gá»‘c `src/lib/game/structures.ts`. Giá» Ä‘Ã¢y, file nÃ y lÃ  nguá»“n chÃ¢n lÃ½ duy nháº¥t cho táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cá»§a má»™t cÃ´ng trÃ¬nh.

3.  **ÄÆ¡n giáº£n hÃ³a Tham chiáº¿u Template:**
    *   **Váº¥n Ä‘á»:** CÃ¡c file template nhÆ° `mountain.ts` vÃ  `cave.ts` pháº£i sá»­ dá»¥ng má»™t "wrapper" object phá»©c táº¡p (`{ data: ..., conditions: ... }`) Ä‘á»ƒ tham chiáº¿u Ä‘áº¿n cÃ´ng trÃ¬nh.
    *   **Giáº£i phÃ¡p:** Sau khi Ä‘Ã£ chuáº©n hÃ³a dá»¯ liá»‡u gá»‘c, cÃ¡c file template giá» Ä‘Ã¢y chá»‰ cáº§n tham chiáº¿u trá»±c tiáº¿p Ä‘áº¿n `structureDefinitions['Cá»­a háº§m má» bá» hoang']`. CÃ¡ch lÃ m nÃ y khÃ´ng chá»‰ sá»­a lá»—i mÃ  cÃ²n giÃºp cho cÃ¡c file template trá»Ÿ nÃªn sáº¡ch sáº½, dá»… Ä‘á»c vÃ  dá»… báº£o trÃ¬ hÆ¡n ráº¥t nhiá»u.

### ğŸ® **áº¢nh hÆ°á»Ÿng Ä‘áº¿n Tráº£i nghiá»‡m & TÆ°Æ¡ng lai**

*   **Äá»™ tin cáº­y tuyá»‡t Ä‘á»‘i:** Lá»—i `SKIPPING entity data is missing 'name' or 'type' property` liÃªn quan Ä‘áº¿n `structure` Ä‘Ã£ Ä‘Æ°á»£c loáº¡i bá» hoÃ n toÃ n. Engine sinh tháº¿ giá»›i giá» Ä‘Ã¢y sáº½ khÃ´ng bao giá» gáº·p pháº£i lá»—i do dá»¯ liá»‡u cÃ´ng trÃ¬nh khÃ´ng nháº¥t quÃ¡n.
*   **Kháº£ nÄƒng báº£o trÃ¬:** Viá»‡c táº­p trung táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cá»§a má»™t thá»±c thá»ƒ vÃ o má»™t nÆ¡i duy nháº¥t giÃºp viá»‡c quáº£n lÃ½, cÃ¢n báº±ng game vÃ  thÃªm ná»™i dung má»›i trong tÆ°Æ¡ng lai trá»Ÿ nÃªn dá»… dÃ ng vÃ  Ã­t rá»§i ro hÆ¡n. Ná»n mÃ³ng dá»¯ liá»‡u cá»§a chÃºng ta giá» Ä‘Ã¢y thá»±c sá»± vá»¯ng cháº¯c.
